{% extends 'base.html' %}

{% block head %}
<body>
    <a href="{% url 'explore' %}" class="btn btn-primary">Back to Explore</a>
    <a href="{% url 'profile_management' %}" class="btn btn-primary">Manage Email and Password</a>



    <h1>Profile </h1>

    <h2>Your Listings</h2>
    {% if listings %}
        <ul>
        {% for listing in listings %}
            <li>
                <p><strong>{{ listing.name }}</strong> - ${{ listing.price }}</p>
                <p>{{ listing.description }}</p>
                <img src="{{ listing.image.url }}" width="200" height="200" alt="Listing Image">

                <!-- Only show edit and delete buttons if the listing belongs to the logged-in user -->
                {% if request.user == listing.user %}
                    <!-- Link to edit listing page -->
                    <a href="{% url 'edit_listing' listing.id %}">
                        <button type="button">Edit</button>
                    </a>

                    <!-- Form to delete listing -->
                    <form action="{% url 'delete_listing' listing.id %}" method="POST" style="display:inline;">
                        {% csrf_token %}
                        <button type="submit">Delete</button>
                    </form>
                {% endif %}
            </li>
        {% endfor %}
        </ul>
    {% else %}
        <p>You have no listings yet.</p>
    {% endif %}
</body>
{% endblock %}
